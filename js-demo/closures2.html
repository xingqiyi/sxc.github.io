<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Language" Content="en" />
<meta charset="utf-8">

<style>
 
 </style>


</head>
<body>
 

<script>
  
//闭包只能取得 包含函数中 任何变量的最后一个值
function createFun(){
    var result = new Array();
    for(var i = 0;i<10;i++){
        result[i]=function(){
            return i;
        };
    }
    return result;
}

var a =createFun();
a[0]();//10
a[1]();//10

// 每个函数都返回 10 因为每个函数的作用域连中都保存着 createFun 函数的活动对象
// 所以他们引用的是同一个变量 i
// 当 createFun 返回后  变量 i 的值 为10
// 此时每个函数都引用着 保存变量 i 的同一个变量对象



//可以创建另外一个 匿名函数 解决问题

function createFun(){
    var result = new Array();
    for(var i = 0;i<10;i++){
        result[i]=function(num){
            return function(){
              return num;
            };
        }(i);
    }
    return result;
}

var aa =createFun();
aa[0]();//10
aa[1]();//10
//这个版本中 没有直接把闭包赋给数组
//而是把 i 传参到 一个匿名函数中  
//会将变量 i 的当前值 复制给 num



//闭包  this



// 闭包  内存泄漏
</script>



</body>
</html>
